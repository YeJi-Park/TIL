## Effective Java 3/E

#### Item 64. 객체는 인터페이스를 사용해 참조하라

- 객체는 클래스가 아니라 인터페이스를 사용해 참조해야 함
- 적합한 인터페이스가 있다면 매개변수 뿐 아니라 반환값, 변수, 필드 전부를 인터페이스 타입으로 선언
- 객체의 실제 클래스를 사용하는 상황은 **오직** 생성자로 생성할 때

```java
// 좋은 예
Set<Son> sonSet =  new LinkedHashSet<>();

// 나쁜 예
LinkedHashSet<Son> sonSet = new LinkedHashSet<>();
```

- 인터페이스를 타입으로 사용하면 프로그램이 훨씬 유연해짐

  > 구현 클래스를 교체할 때 다른 생성자를 호출하기만 하면 됨

- 원래 클래스가 특별한 기능을 제공하고 이 기능을 사용하고 있다면 새로운 클래스도 반드시 같은 기능을 제공해야 함

  > LinkedHashSet의 순서 정책을 가정하고 동작하는 코드일 경우, HashSet으로 변경할 경우 그 전과 다르게 동작할 수 있으므로 이 부분을 고려해야 함

  

- 변수를 구현 타입으로 선언하면 기존 타입에서만 제공하는 메서드를 사용하거나, 기존 타입을 사용하는 메서드에 인스턴스를 넘길 경우 컴파일 되지 않을 수 있음

-----

###### 적합한 인터페이스가 없는 경우

- 적합한 인터페이스가 없으면 클래스로 참조해야 함

1. String, BigInteger 같은 여러 가지로 구현될거라고 생각하기 어려운 클래스들은 그냥 사용해도 무방

2. 클래스 기반으로 작성된 프레임워크가 제공하는 객체들

   > 이런 경우도 추상 클래스인 기반 클래스를 사용해 참조하는 것이 좋음

3. 인터페이스에 없는 특별한 메서드를 제공하는 클래스들

   > PriorityQueue에만 있는 comparator를 사용해야 하는 경우

------

###### 결론

- 주어진 객체를 표현할 적절한 인터페이스가 있을 경우 인터페이스를 참조할 것
- 적합한 인터페이스가 없을 경우 클래스 계층구조 중 필요한 기능을 만족하는 가장 덜 구체적인 클래스를 사용